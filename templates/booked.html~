{% extends 'base.html' %}

{% block content %}
    {% for bus in busd %}
        <div class="bus-details">
            <p><strong>Bus ID:</strong> {{ bus[0] }}</p>
            <p><strong>To Location:</strong> {{ bus[2].title() }}</p>
            <p><strong>From Location:</strong> {{ bus[1].title() }}</p>
            <p><strong>Cost:</strong> Ksh {{ bus[3] }}</p>
            <p><strong>Rating:</strong> {{ bus[4] }}</p>
            <p><strong>Date:</strong> {{ bus[8] }}</p>
            <p><strong>Departure Time:</strong> {{ bus[5] }}</p>
            <p><strong>Arrival Time:</strong> {{ bus[6] }}</p>
            <p><strong>Seats Available:</strong> {{ bus[7] }}</p>
        </div>

        <form action="{{ url_for('booked', busid=bus[0]) }}" method="POST" class="booking-form">
            <h3>Book Your Ticket</h3>
            
            <label for="passengers">Enter the number of passengers:</label>
            <select id="passengers" name="passengers" required aria-label="Number of passengers">
                {% for i in seats %}
                    <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
            </select><br><br>

            <!-- CSRF Token for Security -->
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <!-- Submit Button -->
            <input type="submit" name="submit" value="Book Ticket" class="submit-button">
        </form>
        <hr>
    {% endfor %}
{% endblock %}
